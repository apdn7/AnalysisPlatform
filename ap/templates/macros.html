{% macro input(name,label,value='',max_length=500,type='text') %}
    <div class="form-group">
        <label for="{{ name }}" class="col-form-label">{{ label }}</label>
        <input
            type="{{ type }}"
            id="{{ name }}"
            name="{{ name }}"
            class="form-control"
            value="{{ value | escape }}"
            maxlength="{{ max_length }}"
        />
    </div>
{% endmacro %}

{% macro input_hidden(name, value, id='') %}
    <input
        type="hidden"
        {% if id !='' %}id="{{ id }}"{% endif %}name="{{ name }}"
        value="{{ value }}"
    />
{% endmacro %}

{% macro flash(type, message) %}
    {% if type == false %}
        <div class="alert alert-danger" role="alert">{{ message }}</div>
    {% elif type == true %}
        <div class="alert alert-success" role="alert">{{ message }}</div>
    {% endif %}
{% endmacro %}

{% macro alert_message(alertID, on_top=False, header_warning=False) %}
    {% set class = '' %}
    {% if on_top %}
        {% set class = ' alert-top-fixed' %}
    {% endif %}
    {% if header_warning %}
        {% set class = ' alert-header' %}
    {% endif %}
    <div
        id="{{ alertID }}"
        class="alert alert-dismissible fade{{ class }}"
        style="text-align: left; display:none"
        role="alert"
    >
        <strong id="{{ alertID }}-content"></strong>
        <button
            type="button"
            class="close"
            onclick="$(this).parent().css('display','none');"
            aria-label="Close"
        >
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
{% endmacro %}

{% macro input_row(name, label, value='', type='text',label_block_cnt = 4,input_block_cnt = 8, id='') %}
    <div class="form-group row">
        <label
            for="{{ id or name }}"
            class="col-sm-{{ label_block_cnt }} col-form-label label-right"
        >
            <h5>{{ _(label) }}</h5>
        </label>
        <div class="col-sm-{{ input_block_cnt }}">
            <input
                type="{{ type }}"
                name="{{ name }}"
                class="form-control"
                value="{{ value | escape }}"
                id="{{ id or name }}"
                {% if type == 'password' %}autocomplete=on{% endif %}
            />
            <span
                id="{{ id or name }}-error-msg"
                class="error text-danger"
                style="display: none; text-align: left; font-size: smaller;"
                >{{ _("Already registered") }}</span
            >
        </div>
    </div>
{% endmacro %}

{% macro label(label, h=5, name='', title='', hl='') %}
    <label for="{{ name }}" class="col-form-label label-left{{ hl }}">
        {% if title %}
            <span title="{{ title|e }}" class="hint-text section-label"
                >{{ label }}</span
            >
        {% else %}
            <span class="section-label">{{ label }}</span>
        {% endif %}
    </label>
{% endmacro %}

{% macro sub_label(label, name='', title='', hl='') %}
    <label for="{{ name }}" class="col-form-label label-left{{ hl }}">
        {% if title %}
            <span title="{{ title|e }}" class="hint-text sub-label"
                >{{ label }}</span
            >
        {% else %}
            <span class="sub-label">{{ label }}</span>
        {% endif %}
    </label>
{% endmacro %}

<!--  selectbox ex:procs-->
{% macro single_selectbox(name, label,items, selected,label_block_cnt = 1,selectbox_block_cnt = 11, is_required=false, no_link_data=false, multiple_cols=true, id='') %}
    <div class="mb-2 row">
        {% if label != '' %}
            <label
                for="{{ id or name }}"
                class="col-sm-{{ label_block_cnt }} col-form-label label-right"
            >
                <h5>{{ label }}</h5>
            </label>
            {% set col = selectbox_block_cnt %}
        {% else %}
            {% set col = selectbox_block_cnt + label_block_cnt %}
        {% endif %}
        <div class="col-sm-{{ col }}">
            <select
                class="form-control select2-selection--single {{ 'select-n-columns' if multiple_cols else '' }} {{ 'required-input' if is_required else '' }}"
                name="{{ name }}"
                id="{{ id or name }}"
                {{ 'onchange=validateDataLink(this);' if no_link_data else '' }}
            >
                {% if no_link_data == true %}
                    <option value="0">{{ _('No data link') }}</option>
                {% endif %}
                <option value="">---</option>
                {% for item in items %}
                    <option value="{{ item[0] }}" title="{{ item[2] }}">
                        {{ item[1] }}
                    </option>
                {% endfor %}
            </select>
        </div>
    </div>
{% endmacro %}

<!-- datepick -->
{% macro datepick(name, label='', date_value='',with_time=False,time_value='',id='') %}
    <div class="row">
        {% if label != '' %}
            <label for="{{ name }}" class="col-sm-1 label-right">
                <h5>{{ label }}</h5>
            </label>
            {% set col = 11 %}
        {% else %}
            {% set col = 12 %}
        {% endif %}
        <div class="col-sm-{{ col }}">
            {% if id == '' %}
                <input
                    class="datepicker hasdatepicker form-control category-plot-time"
                    data-date-format="yyyy-mm-dd"
                    name="{{ name }}"
                    type="text"
                />
            {% else %}
                <input
                    id="{{ id }}"
                    class="datepicker hasdatepicker form-control category-plot-time"
                    data-date-format="yyyy-mm-dd"
                    name="{{ name }}"
                    type="text"
                />
            {% endif %}
        </div>
    </div>
{% endmacro %}

<!-- datetime_range_picker -->
{% macro datetime_range_picker(name, label='', id='', isShowTimePicker=True, isSetDefaultValue=True, dtClassName='', isShowRecentDates=True, focus='') %}
    {% if label != '' %}
        <label for="{{ name }}" class="col-sm-1 label-right">
            <h5>{{ label }}</h5>
        </label>
        {% set col = 11 %}
    {% else %}
        {% set col = 12 %}
    {% endif %}
    <input
        {% if id != '' %}id="{{ id }}" onfocus="{{ focus }}"{% endif %}
        name="{{ name }}"
        type="text"
        value=""
        class="datetimepicker form-control {{ dtClassName }}"
        is-show-time-picker="{{ isShowTimePicker }}"
        is-set-default-value="{{ isSetDefaultValue }}"
        is-show-recent-dates="{{ isShowRecentDates }}"
        autocomplete="off"
    />
{% endmacro %}

<!-- start proc -->
{% macro start_proc(procs, selected, traceData=false, title='', width=2, showAutoUpdate=true, showDataFinder=True) %}
    <div class="card-body table-bordered graph-navi" id="srtPrc">
        <div class="row">
            <div class="col-xl-{{ width }} col-3">
                <div class="d-flex justify-content-between">
                    {{ label(_('Target period'), title=title) }}
                    {{ paste_btn() }}
                </div>
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div class="row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        {{ start_proc_interval(showAutoUpdate, showDataFinder=showDataFinder) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro heatmap_target_period() %}
    <div class="card-body table-bordered graph-navi" id="srtPrc">
        <div class="row">
            <div class="col-xl-2 col-3">
                <div class="d-flex justify-content-between">
                    {{ label(_('Target period'), title='') }}
                    {{ paste_btn() }}
                </div>
            </div>
            <div class="col-xl-10 col-9">
                <div class="row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        {{ start_proc_interval(showAutoUpdate=True, isShowTimePicker=False) }}
                        {{ heatmap_cycle() }}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- Heat Map menu draft -->
{% macro heatmap_cycle() %}
    <div class="d-flex align-items-center mt-2" id="cycle">
        <div class="d-flex align-items-center mr-lg-5 mr-3">
            <span class="sub-label d-block mr-3">{{ _('Cycle') }}</span>
            <select id="mode" class="form-control w-auto" name="mode">
                <option value="7">{{ _('Weekly') }}</option>
                <option value="1">{{ _('Daily') }}</option>
            </select>
        </div>
        <div class="d-flex align-items-center">
            <span class="sub-label d-block mr-3">{{ _('Step') }}</span>
            <select
                id="stepMinute"
                class="form-control w-auto"
                name="step_minute"
            >
                <option value="10">10 min</option>
                <option value="15">15 min</option>
                <option value="20">20 min</option>
                <option value="30">30 min</option>
                <option value="60">60 min</option>
                <option value="120">120 min</option>
                <option value="180">180 min</option>
            </select>
            <select id="stepHour" class="form-control w-auto" name="step_hour">
                <option value="1">1 h</option>
                <option value="2">2 h</option>
                <option value="4">4 h</option>
                <option value="6">6 h</option>
                <option value="8">8 h</option>
                <option value="12">12 h</option>
                <option value="24">24 h</option>
            </select>
        </div>
    </div>
{% endmacro %}

<!-- end proc -->
{% macro end_proc(procs, selected, label_i18n_key='Show value', title='', width=2, multiple_proc=true, traceData=false, dom_prefix='', showStartProc=false, nominalScale=False) %}
    <div class="card-body table-bordered graph-navi" id="endPrc">
        <div class="row">
            <div class="col-xl-{{ width }} col-3 d-flex flex-column">
                <div class="d-flex justify-content-between">
                    {{ label(_(label_i18n_key), title=title) }}
                    {{ paste_btn(with_count=True) }}
                </div>
                {% if nominalScale %}
                    {{ nominal_scale() }}
                {% endif %}
                {% if traceData or showStartProc %}
                    <div class="mt-auto pl-3 pt-3">
                        {% if traceData %}
                            <div
                                class="custom-control custom-checkbox custom-control-inline grp-height-align mb-2"
                            >
                                <input
                                    type="checkbox"
                                    name="showScatterPlotSelect"
                                    value="1"
                                    class="custom-control-input"
                                    id="showScatterPlotSelect"
                                />
                                <label
                                    class="custom-control-label"
                                    for="showScatterPlotSelect"
                                    >{{ _('Scatter Plot display') }}</label
                                >
                            </div>
                        {% endif %}
                        <!-- start proc  -->
                        {{ start_proc_select(procs, no_link_data=traceData) }}
                    </div>
                {% endif %}
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div class="row" id="{{ dom_prefix }}end-proc-row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        {% if multiple_proc == true %}
                            <button
                                id="btn-add-end-proc"
                                name="btnAddEndProc"
                                onclick="addGroupListCheckboxWithSearch()"
                                type="button"
                                class="btn simple-btn"
                            >
                                <i class="fas fa-plus-circle"></i>
                            </button>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- end_proc_cate -->
{% macro end_proc_cate(title='', label_i18n_key='Category value', width=2, is_optional=false) %}
    <div class="card-body table-bordered graph-navi">
        <div class="row">
            <div class="col-xl-{{ width }} col-3">
                <div class="d-flex justify-content-between">
                    {{ label(_(label_i18n_key), title=title) }}
                    {{ paste_btn(with_count=True) }}
                </div>
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div class="row" id="end-proc-cate-row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        <button
                            id="btn-add-end-proc-cate"
                            name="btnAddEndProc"
                            type="button"
                            class="btn simple-btn"
                        >
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- end proc -->
{% macro calendar_heatmap_end_proc(title='', procs=[], no_link_data=false, width=2, cat_count=true, color_scale=false) %}
    <div class="card-body table-bordered graph-navi">
        <div class="row">
            <div class="col-xl-{{ width }} col-3 d-flex flex-column">
                <div class="d-flex justify-content-between">
                    {{ label(_('Show value'), title=title) }}
                    {{ paste_btn(with_count=True) }}
                </div>
                <div class="mt-auto pl-3">
                    <div class="row">
                        <div class="col">
                            {{ sub_label(_('numericLabel'), title=_('numericHoverMsg'), hl=' pb-0') }}
                            <div class="d-flex justify-content-center">
                                <select
                                    id="hmFunctionReal"
                                    class="form-control mb-2"
                                    name="function_real"
                                >
                                    <option value="median">
                                        {{ _('CHMMedian') }}
                                    </option>
                                    <option value="max">
                                        {{ _('CHMMax') }}
                                    </option>
                                    <option value="mean">
                                        {{ _('CHMMean') }}
                                    </option>
                                    <option value="min">
                                        {{ _('CHMMin') }}
                                    </option>
                                    <option value="std">
                                        {{ _('CHMStd') }}
                                    </option>
                                    <option value="range">
                                        {{ _('CHMRange') }}
                                    </option>
                                    <option value="iqr">
                                        {{ _('IQR (Q3-Q1)') }}
                                    </option>
                                    <option value="sum">
                                        {{ _('CHMSum') }}
                                    </option>
                                </select>
                                {% if color_scale %}
                                    <select
                                        id="hmColorReal"
                                        class="form-control ml-2"
                                        name="color_real"
                                    >
                                        <option value="BLUE">
                                            {{ _('Blue') }}
                                        </option>
                                        <option value="BLUE_REV">
                                            {{ _('Blue.Rev') }}
                                        </option>
                                        <option value="JET">
                                            {{ _('Jet') }}
                                        </option>
                                        <option value="JET_REV">
                                            {{ _('Jet.Rev') }}
                                        </option>
                                        <option value="JET_ABS">
                                            {{ _('JetAbs') }}
                                        </option>
                                        <option value="JET_ABS_REV">
                                            {{ _('JetAbs.Rev') }}
                                        </option>
                                    </select>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% if cat_count %}
                        <div class="row">
                            <div class="col">
                                {{ sub_label(_('nonNumericLabel'), title=_('nonNumericHoverMsg'), hl=' pb-0') }}
                                <div class="d-flex justify-content-center">
                                    <select
                                        id="hmFunctionCate"
                                        class="form-control"
                                        name="function_cate"
                                    >
                                        <option value="count">
                                            {{ _('CHMCount') }}
                                        </option>
                                        <option value="count_per_hour">
                                            {{ _('CHMCountPerHour') }}
                                        </option>
                                        <option value="count_per_min">
                                            {{ _('CHMCountPerMin') }}
                                        </option>
                                        <option value="time_per_count">
                                            {{ _('CHMTimePerCount') }}
                                        </option>
                                    </select>
                                    {% if color_scale %}
                                        <select
                                            id="hmColorCate"
                                            class="form-control ml-2"
                                            name="color_cat"
                                        >
                                            <option value="BLUE">
                                                {{ _('Blue') }}
                                            </option>
                                            <option value="BLUE_REV">
                                                {{ _('Blue.Rev') }}
                                            </option>
                                            <option value="JET">
                                                {{ _('Jet') }}
                                            </option>
                                            <option value="JET_REV">
                                                {{ _('Jet.Rev') }}
                                            </option>
                                            <option value="JET_ABS">
                                                {{ _('JetAbs') }}
                                            </option>
                                            <option value="JET_ABS_REV">
                                                {{ _('JetAbs.Rev') }}
                                            </option>
                                        </select>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    <div class="mt-4">
                        {{ start_proc_select(procs, no_link_data=no_link_data) }}
                    </div>
                </div>
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div class="row" id="end-proc-row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        <button
                            id="btn-add-end-proc"
                            name="btnAddEndProc"
                            onclick="addGroupListCheckboxWithSearch()"
                            type="button"
                            class="btn simple-btn"
                        >
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- condition proc -->
{% macro cond_proc(procs, selected, prefix='', title='', width=2, pysm=4, is_optional=false) %}
    <div class="card-body table-bordered graph-navi" id="cndPrc">
        <div class="row">
            <div class="col-xl-{{ width }} col-3">
                <div class="d-flex justify-content-between">
                    {{ label(_('Filter'), title=title) }}
                    {{ paste_btn() }}
                </div>
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div class="row" id="{{ prefix }}cond-proc-row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        <button
                            id="{{ prefix }}btn-add-cond-proc"
                            name="btnAddCondProc"
                            type="button"
                            class="btn simple-btn"
                        >
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- condition proc for PCA -->
{% macro cond_proc_train_test(title='', width=2, pysm=4, is_optional=false) %}
    <div class="card-body table-bordered graph-navi" id="cndPrc">
        <div class="row">
            <div class="col-xl-{{ width }} col-3">
                <div class="d-flex justify-content-between">
                    {{ label(_('Filter'), title=title) }}
                    {{ paste_btn() }}
                </div>
            </div>
            <div class="col-xl-10 col-9 d-flex flex-wrap px-0">
                {{ cond_proc_column(prefix='train', label_text=_("Training data"), title=_('Set training data to be regarded as normal situation.')) }}
                {{ cond_proc_column(prefix='', label_text=_("Target data"), title=_('Set test data to be judged.')) }}
            </div>
        </div>
    </div>
{% endmacro %}

{% macro cond_proc_column(prefix='', label_text='', title='') %}
    <div class="col-xl-6 col-12 px-0">
        {{ label(label_text, title=title) }}
        <div id="{{ prefix }}cond-proc-row">
            <div class="col-12 p-1">
                <button
                    id="{{ prefix }}btn-add-cond-proc"
                    name="btnAddCondProc"
                    type="button"
                    class="btn simple-btn"
                >
                    <i class="fas fa-plus-circle"></i>
                </button>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro check_db_connection_message(dbType, html, btnID, msgID) %}
    <button
        id="{{ btnID }}"
        onclick="checkDBConnection('{{ dbType.lower() }}', '{{ html }}', '{{ msgID }}')"
        class="btn btn-secondary"
    >
        {{ _('Test connection') }}
    </button>
    <span
        id="{{ msgID }}"
        class="check-db-msg text-left mr-auto"
        style="text-align:left"
    ></span>
{% endmacro %}

{% macro import_status(db_id, status) %}
    {%
        set st = {
            'DONE': {
                'title': 'Finished Importing',
                'class': 'check green'
            },
            'FAILED': {
                'title': 'Failed Importing',
                'class': 'exclamation-triangle yellow'
            },
            'PROCESSING': {
                'title': 'Importing',
                'class': 'spinner fa-spin'
            },
            'KILLED': {
                'title': 'Killed',
                'class': 'exclamation-triangle yellow'
            },
            'PENDING': {
                'title': 'Pending',
                'class': 'exclamation-triangle yellow'
            }
        }
    %}
    <div class="align-middle text-center" data-st="{{ st[status]['title'] }}">
        <div
            class=""
            data-toggle="tooltip"
            data-placement="top"
            title="{{ _(st[status]['title']) }}"
        >
            <i class="fas fa-{{ st[status]['class'] }} status-i"></i>
        </div>
    </div>
{% endmacro %}

{% macro import_progress(db_id, status, percentage) %}
    {%
        set progress = {
            'DONE': {
                'class': 'bg-success',
            },
            'FAILED': {
                'class': 'bg-warning',
            },
            'KILLED': {
                'class': 'bg-warning',
            },
            'PROCESSING': {
                'class': 'progress-bar-animated',
            },
            'PENDING': {
                'class': 'progress-bar-animated',
            },
        }
    %}
    <div class="progress">
        <div
            class="progress-bar progress-bar-striped {{ progress[status]['class'] }}"
            role="progressbar"
            style="width: {{ percentage }}%"
            aria-valuenow="{{ percentage }}"
            aria-valuemin="0"
            aria-valuemax="100"
        >
            {{ percentage }}%
        </div>
    </div>
{% endmacro %}

<!-- Heatmap End Proc -->
{% macro heatmap_end_proc(procs, title='', width=2) %}
    <div class="card-body table-bordered graph-navi">
        <div class="row">
            <div class="col-xl-{{ width }} col-3 d-flex flex-column">
                <div class="d-flex justify-content-between">
                    {{ label(_('Show value'), title=title) }}
                    {{ paste_btn(with_count=True) }}
                </div>
                <div>
                    {{ label(_('Color'), title=_('HMp color hover msg')) }}
                    <div class="pl-3">
                        <div class="d-flex align-items-center">
                            {{ sub_label(_('numericLabel'), title=_('numericHoverMsg'), hl=' mr-3') }}
                            <select
                                id="function_real"
                                class="form-control"
                                style="width: 120px"
                                name="function_real"
                            >
                                <option value="last">Last</option>
                                <option value="first">First</option>
                                <option value="median">
                                    {{ _('CHMMedian') }}
                                </option>
                                <option value="max">{{ _('CHMMax') }}</option>
                                <option value="mean">{{ _('CHMMean') }}</option>
                                <option value="min">{{ _('CHMMin') }}</option>
                                <option value="std">{{ _('CHMStd') }}</option>
                                <option value="range">
                                    {{ _('CHMRange') }}
                                </option>
                                <option value="iqr">
                                    {{ _('IQR (Q3-Q1)') }}
                                </option>
                                <option value="ratio">Ratio[%]</option>
                                <option value="count">
                                    {{ _('CHMCount') }}
                                </option>
                                <option value="sum">{{ _('CHMSum') }}</option>
                            </select>
                        </div>
                        <div class="d-flex align-items-center mt-1">
                            {{ sub_label(_('nonNumericLabel'), title=_('nonNumericHoverMsg'), hl=' mr-3') }}
                            <select
                                id="function_cate"
                                class="form-control"
                                style="width: 120px"
                                name="function_cate"
                            >
                                <option value="ratio">Ratio[%]</option>
                                <option value="count">
                                    {{ _('CHMCount') }}
                                </option>
                                <option value="last">Last</option>
                                <option value="first">First</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="mt-auto pl-3 pt-3">
                    {{ start_proc_select(procs) }}
                </div>
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div class="row" id="end-proc-row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        <button
                            id="btn-add-end-proc"
                            name="btnAddEndProc"
                            type="button"
                            class="btn simple-btn"
                        >
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- Scatter End Proc -->
{% macro scatter_end_proc(procs, selected,start_date,start_tm,end_date,end_tm, title='', width=2, multiple_proc=true, isShowMinMax=true) %}
    <div class="card-body table-bordered graph-navi">
        <div class="row">
            <div class="col-xl-{{ width }} col-3 d-flex flex-column">
                <div class="d-flex justify-content-between">
                    {{ label(_('Show value'), title=title) }}
                    {{ paste_btn(with_count=True) }}
                </div>
                {% if isShowMinMax %}
                    <label class="num-sensor-limit">
                        <span>{{ _('Min') }}: 2</span>
                        <span>{{ _('Max') }}: 7</span>
                    </label>
                {% endif %}
                <div class="mt-auto pl-3 pt-3">
                    {{ start_proc_select(procs) }}
                </div>
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div class="row" id="end-proc-row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        <button
                            id="btn-add-end-proc"
                            name="btnAddEndProc"
                            type="button"
                            class="btn simple-btn"
                        >
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- end_proc_real -->
<!-- used in paracords page -->
{% macro end_proc_paracords_real(procs, title='', width=2) %}
    <div class="card-body table-bordered graph-navi">
        <div class="row">
            <div class="col-xl-{{ width }} col-3 d-flex flex-column">
                <div class="d-flex justify-content-between">
                    {{ label(_('Show value'), title=title) }}
                    {{ paste_btn(with_count=True) }}
                </div>
                <div class="pl-3 pt-3">
                    <div
                        class="custom-control custom-checkbox custom-control-inline"
                    >
                        <input
                            type="checkbox"
                            id="show-ct-time"
                            name="is_show_ct_time"
                            class="custom-control-input"
                            value="0"
                            onchange="onChangeShowCTTime(this);"
                        />
                        <label class="custom-control-label" for="show-ct-time"
                            >{{ _('Cycle Time Analysis') }}</label
                        >
                    </div>
                </div>
                <div class="mt-auto pl-3 pt-3">
                    {{ start_proc_select(procs) }}
                </div>
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div class="row" id="end-proc-row" sensor-type="real">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        <button
                            id="btn-add-end-proc"
                            name="btnAddEndProc"
                            type="button"
                            class="btn simple-btn"
                        >
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}
<!-- -->
<!-- used in paracords page -->
{% macro end_proc_paracords_cate(procs, title='', width=2) %}
    <div class="card-body table-bordered graph-navi">
        <div class="row">
            <div class="col-xl-{{ width }} col-3">
                <div class="d-flex justify-content-between">
                    {{ label(_('Show value (Category)'), title=title) }}
                    {{ paste_btn() }}
                </div>
            </div>
            <div class="col-xl-{{ 12 - width }} col-9">
                <div
                    class="row"
                    id="end-proc-paracords-cate-row"
                    sensor-type="cate"
                >
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        <button
                            id="btn-add-end-proc-paracords-cate"
                            name="btnAddEndProc"
                            type="button"
                            class="btn simple-btn"
                        >
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}
<!-- -->
<!-- Page title -->
{% macro page_title(title='', hint='', hasAction=false, key='') %}
    <div class="page-title graph-navi row">
        <div class="col-12 d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
                {% if hint %}
                    <h2 class="top-index" title="{{ hint }}">
                        {% if key %}
                            <span class="page-title-character">{{ key }}</span>
                        {% endif %}
                        <span class="hint-text">{{ title }}</span>
                    </h2>
                {% else %}
                    <h2 class="top-index">{{ title }}</h2>
                {% endif %}
                {% if hasAction == true %}
                    <div class="d-flex align-items-center ml-3">
                        <button
                            name="copyPage"
                            type="button"
                            class="btn p-0 top-index"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="{{ _('Copy config') }}"
                        >
                            <i class="fa fa-copy"></i>
                        </button>
                        <button
                            name="pastePage"
                            type="button"
                            class="btn p-0 ml-1 top-index"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="{{ _('Paste config') }}"
                        >
                            <i class="fa fa-file-import"></i>
                        </button>
                    </div>
                    <div class="ml-5">
                        <i
                            id="setting-change-mark"
                            class="fa fa-circle fa-sm hide"
                        ></i
                        ><span
                            class="ml-2 bookmarked-label"
                            id="setting-name"
                        ></span>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endmacro %}
<!-- -->
<!-- Page title -->
{% macro paste_btn(with_count=False) %}
    <div class="d-flex flex-column justify-content-between align-items-center">
        <button
            name="pasteCard"
            type="button"
            class="btn p-0 ml-1"
            data-toggle="tooltip"
            data-placement="top"
            title="{{ _('Paste config') }}"
        >
            <i class="fa fa-file-import"></i>
        </button>
        {% if with_count %}
            <div style="display: none" id="variables-count">
                <span id="count-total-variables"></span>/<span
                    id="max-variables"
                ></span>
            </div>
        {% endif %}
    </div>
{% endmacro %}
<!-- -->
<!-- Exception Estimation  -->
{% macro exception_est(checkId='isValidateData') %}
    <div
        class="custom-control custom-checkbox custom-control-inline grp-height-align"
    >
        <input
            type="checkbox"
            name="isValidateData"
            class="custom-control-input"
            id="{{ checkId }}"
            checked
        />
        <label class="custom-control-label" for="{{ checkId }}">
            <span title="{{ _('Exception Estimation Explanation') }}">
                <span class="hint-text">{{ _("Exception Estimation") }}</span>
            </span>
        </label>
    </div>
{% endmacro %}
<!-- -->

<!-- Graph range dropdown -->
{% macro scale_option(name='yScaleGroup', label=_('Range of Y axis'), className='', onChange='', defaultOption='1', id='') %}
    <div class="d-flex align-items-center ml-2 {{ className }}">
        <span class="mr-2"> {{ label }} </span>
        <select
            default-value="{{ defaultOption }}"
            name="{{ name }}"
            onchange="{{ onChange }}"
            class="form-control border-white w-auto scale-dropdown y-axis-scale"
            id="{{ id }}"
        >
            <option value="1">{{ _('Setting scale') }}</option>
            <option value="2">{{ _('Common scale') }}</option>
            <option value="3">{{ _('Threshold line') }}</option>
            <option value="4">{{ _('Auto range') }}</option>
            <option value="5">{{ _('Full range') }}</option>
        </select>
    </div>
{% endmacro %}
<!-- category label filter in trace -->
{% macro cat_label_filter_modal(scp=false) %}
    <div class="cat-filter-modal modal fade" id="catFilterModal">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <!--    head actions    -->
                    <div
                        class="d-flex align-items-center justify-content-between"
                    >
                        <h4>{{ _('Filter Setting') }}</h4>
                        <div class="d-flex align-items-center">
                            <span id="filterSortBtn" class="mr-1" title="Sort"
                                ><i class="fa fa-sort"></i
                            ></span>
                            <div
                                class="d-flex align-items-center mr-3 border-gray-curve p-1"
                            >
                                <div class="mr-1">
                                    <input
                                        title="{{ _('Filter search box hover msg') }}"
                                        placeholder="{{ _('Search') }}"
                                        id="catFilterSearch"
                                        class="form-control"
                                    />
                                </div>
                                <button
                                    class="btn simple-btn btn-setting mr-1"
                                    id="catFilterSet"
                                >
                                    Set
                                </button>
                                <button
                                    class="btn simple-btn btn-setting"
                                    id="catFilterReset"
                                >
                                    Reset
                                </button>
                            </div>
                            <button
                                type="button"
                                id="catFilterSubmit"
                                class="btn btn-setting simple-btn mr-1"
                            >
                                OK
                            </button>
                            <button
                                type="button"
                                class="btn btn-setting simple-btn"
                                data-dismiss="modal"
                                aria-label="Close"
                                id="catFilterCancel"
                            >
                                Cancel
                            </button>
                        </div>
                    </div>
                    <!--    body   -->
                    <div class="d-flex h-auto overflow-auto custom-scroll">
                        {% if not scp %}
                            <div class="mr-2 cats-exp-box">
                                <span
                                    id="categoriesBoxTitle"
                                    class="cat-title ui-sortable"
                                    >{{ 'Label' }}</span
                                >
                                <div
                                    id="categoriesBox"
                                    class="d-flex ui-sortable"
                                ></div>
                            </div>
                        {% endif %}
                        <div class="mr-2 cats-exp-box">
                            <span
                                id="filterBoxTitle"
                                class="cat-title ui-sortable"
                                >{{ 'Filter' }}</span
                            >
                            <div
                                id="filterBox"
                                class="d-flex ui-sortable"
                            ></div>
                        </div>
                        <div class="mr-2 cats-exp-box">
                            <span id="catExpBoxTitle" class="cat-title"
                                >{{ _('Facet') }}</span
                            >
                            <div id="catExpBox" class="d-flex"></div>
                        </div>
                        <!--                        <div class="mr-2 cats-exp-box">-->
                        <!--							<span id="divTitle" class="cat-title">Div</span>-->
                        <!--							<div id="divBox" class="d-flex"></div>-->
                        <!--						</div>-->
                        <div class="mr-2 cats-exp-box">
                            <span id="colorTitle" class="cat-title">Color</span>
                            <div id="colorBox" class="d-flex"></div>
                        </div>
                        <div class="category-box">
                            <span id="categoriesVarTitle" class="cat-title"
                                >System</span
                            >
                            <div id="categoriesVarBox" class="d-flex"></div>
                        </div>
                        {% if scp %}
                            <div class="mr-2 cats-exp-box">
                                <span
                                    id="categoriesBoxTitle"
                                    class="cat-title ui-sortable"
                                    >{{ 'Other' }}</span
                                >
                                <div
                                    id="categoriesBox"
                                    class="d-flex ui-sortable"
                                ></div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro failed_cast_data_modal(scp=false) %}
    <div class="cat-filter-modal modal fade" id="failedCastDataModal">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <!--    head actions    -->
                    <div
                        class="d-flex align-items-center justify-content-between"
                    >
                        <h4>{{ _('Detail') }}</h4>
                        <div class="d-flex align-items-center">
                            <button
                                type="button"
                                id="btnOKFailedCastDataModal"
                                class="btn btn-setting simple-btn mr-1"
                            >
                                OK
                            </button>
                        </div>
                    </div>
                    <div
                        id="alertFailedCaseDataErrorDiv"
                        class="alert alert-dismissible fade show alert-danger"
                        style="text-align: left; display: none;"
                        role="alert"
                    >
                        <strong id="alertFailedCaseDataErrorMsg"></strong>
                    </div>
                    <!--    body   -->
                    <div class="d-flex h-auto overflow-auto custom-scroll">
                        <div class="mr-2 cats-exp-box">
                            <span
                                id="columnsBoxTitle"
                                class="cat-title ui-sortable"
                                >{{ 'Columns' }}</span
                            >
                            <div
                                id="columnsBox"
                                class="d-flex ui-sortable"
                            ></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro index_order_modal(modalId='xAxisModal', tableId='serialTable', addBtnId='btnAddSerial', okBtnId='btnXAxisModalOK', cancelBtnId='btnXAxisModalCancel') %}
    <div id="{{ modalId }}" class="modal in" data-backdrop="static">
        <div class="modal-dialog modal-confirm modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">{{ _('Index ordering') }}</h4>
                    <button
                        type="button"
                        class="close {{ cancelBtnId }}"
                        data-dismiss="modal"
                        aria-hidden="true"
                    >
                        ×
                    </button>
                </div>
                <div class="modal-body">
                    <table
                        id="{{ tableId }}"
                        class="table table-bordered table-main table-bordered table-dark table-striped table-hover table-hover-light"
                    >
                        <thead>
                            <tr>
                                <th class="text-center">{{ _("Priority") }}</th>
                                <th class="text-center col-serial">
                                    {{ _("Process") }}
                                </th>
                                <th class="text-center col-serial">
                                    {{ _("Column") }}
                                </th>
                                <th class="text-center">{{ _("Order") }}</th>
                                <th class="text-center col-del-btn"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <button
                        id="{{ addBtnId }}"
                        class="btn btn-success icon-btn"
                    >
                        <i class="fas fa-plus-circle"></i>
                    </button>
                </div>
                <div class="modal-footer">
                    <button
                        id="{{ okBtnId }}"
                        class="btn btn-primary"
                        data-item-id=""
                        data-dismiss="modal"
                    >
                        {{ _('OK') }}
                    </button>
                    <button
                        id="{{ cancelBtnId }}"
                        class="btn btn-secondary {{ cancelBtnId }}"
                        data-dismiss="modal"
                    >
                        {{ _('Cancel') }}
                    </button>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!--  対象期間　日時と最新入り替えボックス  -->
{% macro start_proc_interval(showAutoUpdate=true, prefix='', disableLatest=false, name='traceTime', commonClass='', wrapID='target-period-wrapper', showDataFinder=True, cyclicCalender=False, dateRangeHoverMsg='', isShowTimePicker=True) %}
    <div class="d-flex" id="{{ wrapID }}">
        <div class="custom-control custom-radio grp-height-align mr-lg-5 mr-3">
            <input
                type="radio"
                name="{{ name }}"
                onchange="handleChangeInterval(this, 'default-{{ prefix }}')"
                class="custom-control-input {{ commonClass }}"
                id="{{ prefix }}radioDefaultInterval"
                value="default"
                checked="checked"
            />
            <label
                class="custom-control-label"
                title="{{ dateRangeHoverMsg }}"
                for="{{ prefix }}radioDefaultInterval"
                class="label-left"
            >
                <span
                    class="{{ 'hint-text ' if dateRangeHoverMsg else '' }}sub-label"
                    >{{ _('Date range') }}</span
                >
            </label>
        </div>
        <div
            class="custom-control custom-radio grp-height-align mr-lg-5 mr-3 {{ 'visible-hide' if disableLatest else '' }}"
        >
            <input
                class="custom-control-input {{ commonClass }}"
                type="radio"
                name="{{ name }}"
                onchange="handleChangeInterval(this, 'recent-{{ prefix }}')"
                id="{{ prefix }}radioRecentInterval"
                value="recent"
                {{ 'disabled' if disableLatest else '' }}
            />
            <label
                class="custom-control-label"
                title="{{ _('Select a unit of time and input value.') }}"
                for="{{ prefix }}radioRecentInterval"
                class="label-left"
            >
                <span class="sub-label hint-text">{{ _('Latest') }}</span>
            </label>
        </div>
        <!-- switch content -->
        <div class="flex-grow-1">
            <div class="position-relative" id="for-default-{{ prefix }}">
                {{ datetime_range_picker('DATETIME_RANGE_PICKER','',id='datetimeRangePicker' + prefix, dtClassName=commonClass, isShowTimePicker=isShowTimePicker) }}
                <input
                    id="{{ prefix }}startDate"
                    class="datepicker hasdatepicker form-control category-plot-time"
                    data-date-format="yyyy-mm-dd"
                    name="START_DATE"
                    type="text"
                    hidden
                />
                <input
                    name="START_TIME"
                    class="form-control"
                    id="{{ prefix }}startTime"
                    type="text"
                    hidden
                />
                <input
                    id="{{ prefix }}endDate"
                    class="datepicker hasdatepicker form-control category-plot-time"
                    data-date-format="yyyy-mm-dd"
                    name="END_DATE"
                    type="text"
                    hidden
                />
                <input
                    name="END_TIME"
                    class="form-control"
                    id="{{ prefix }}endTime"
                    type="text"
                    hidden
                />
                {% if showDataFinder %}
                    <button
                        type="button"
                        onclick="showDataFinderModal(this)"
                        name="dataFinderBtn"
                        style="position: absolute; top: 3px; right: 3px; display: none"
                        class="btn btn-sm btn-primary"
                    >
                        Data finder
                    </button>
                {% endif %}
            </div>
            <div id="for-recent-{{ prefix }}" style="display: none">
                <div class="d-flex">
                    <input
                        type="text"
                        id="{{ prefix }}recentTimeInterval"
                        class="form-control mr-2 {{ commonClass }}"
                        name="recentTimeInterval"
                        value="24"
                        style="width: 30%"
                        {{ 'disabled' if disableLatest else '' }}
                    />
                    <select
                        class="form-control mr-2 {{ commonClass }}"
                        id="{{ prefix }}timeUnit"
                        onchange="handleTimeUnitOnchange(this)"
                        name="timeUnit"
                        style="width: 30%"
                        {{ 'disabled' if disableLatest else '' }}
                    >
                        {% if not cyclicCalender %}
                            <option data-key="minute" value="1">
                                {{ _('minute') }}
                            </option>
                        {% endif %}
                        <option data-key="hour" value="60" selected>
                            {{ _('hour') }}
                        </option>

                        <option data-key="day" value="1440">
                            {{ _('day') }}
                        </option>
                        <option data-key="week" value="10080">
                            {{ _('week') }}
                        </option>
                        <option data-key="month" value="months">
                            {{ _('Latest month') }}
                        </option>
                        <option data-key="year" value="years">
                            {{ _('Latest year') }}
                        </option>
                    </select>
                    {% if showAutoUpdate %}
                        <div
                            class="custom-control custom-checkbox custom-control-inline grp-height-align"
                        >
                            <input
                                type="checkbox"
                                name="autoUpdateInterval"
                                value="1"
                                class="custom-control-input"
                                id="{{ prefix }}autoUpdateInterval"
                                {{ 'disabled' if disableLatest else '' }}
                            />
                            <label
                                class="custom-control-label"
                                for="{{ prefix }}autoUpdateInterval"
                                >{{ _('Auto Update') }}</label
                            >
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- X index -->
{% macro x_index() %}
    <div class="d-flex align-items-center mr-3">
        <div class="dn-custom-select">
            <select class="form-control" id="xOption" name="xOption">
                <option value="TIME">{{ _("Timestamp") }}</option>
                <option value="INDEX">{{ _('Serial series') }}</option>
            </select>
        </div>
        <div class="index-inform-modal" style="width: 35px">
            <div class="index-inform btn-primary">
                <span><i class="fas fa-info-circle"></i></span>
            </div>
            <div id="indexHoverContent" class="index-inform-content">
                <span class="sub-label">{{ _('Index Ordering Setting') }}</span>
                <button
                    class="btn clipboard"
                    style="float:right;"
                    data-clipboard-target="#index-infor-table"
                    title=""
                >
                    <i class="fa fa-copy" aria-hidden="true"></i>
                </button>
                <div class="index-content">
                    <table
                        class="table table-borderless"
                        id="index-infor-table"
                    >
                        <thead>
                            <tr>
                                <th class="text-center">{{ _("Priority") }}</th>
                                <th class="text-center">{{ _("Process") }}</th>
                                <th class="text-center">{{ _("Column") }}</th>
                                <th class="text-center">{{ _("Order") }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Process 1</td>
                                <td>Index Key</td>
                                <td>昇順</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>Process 1</td>
                                <td>Index Key</td>
                                <td>昇順</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- 起点　セレクション -->
{% macro start_proc_select(procs=[], no_link_data=false) %}
    <div class="">
        {{ sub_label(_('Start point'), title=_('If you do not select start process, the process of the first target variable will be start process.'), hl=' pb-1') }}
        {{ single_selectbox('start_proc','', procs, no_link_data=no_link_data) }}
    </div>
{% endmacro %}

{% macro multiple_target_period(rlp=False, dataNumber=false, scp=false, DivisionNumberHover='', WindowLengthHover=_('Window length Hover'), IntervalHover=_('Interval Hover'), cyclicTermDefault=120, cyclicCalender=False, cyclicIntervalDefault=0.5) %}
    <div class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1">
        <div class="d-flex align-items-center">
            <div class="dn-custom-select" style="width: 200px">
                <select
                    class="form-control"
                    id="divideOption"
                    name="compareType"
                    onchange="handleChangeDivideOption(this)"
                >
                    {% if rlp %}
                        <option
                            class="hint-text"
                            title="{{ _('Divide by category hover msg AgP RLP') if not scp else _('Divide by category hover msg ScP') }}"
                            value="category"
                        >
                            {{ _("Divide by category") if not scp else _('Non-Divided / Divide by Category') }}
                        </option>
                        <option
                            title="{{ _('Divide by term (Cyclic) hover msg') }}"
                            value="cyclicTerm"
                            {{ 'selected' if rlp and not cyclicCalender and not scp }}
                        >
                            {{ _('Divide by term (Cyclic)') }}
                        </option>
                        <option
                            title="{{ _('Divide by term (Direct) hover msg') }}"
                            value="directTerm"
                        >
                            {{ _('Divide by term (Direct)') }}
                        </option>
                    {% else %}
                        <option
                            title="{{ _('Stratify by variables hover msg StP') }}"
                            value="var"
                        >
                            {{ _("Stratify by variables") }}
                        </option>
                        <option
                            title="{{ _('Divide by term (Cyclic) hover msg') }}"
                            value="cyclicTerm"
                        >
                            {{ _('Stratify by term (Cyclic)') }}
                        </option>
                        <option
                            title="{{ _('Divide by term (Direct) hover msg') }}"
                            value="directTerm"
                        >
                            {{ _('Stratify by term') }}
                        </option>
                    {% endif %}

                    {% if dataNumber %}
                        <option
                            title="{{ _('Divide by data number (Cyclic) hover msg') }}"
                            value="dataNumberTerm"
                        >
                            {{ _('Divide by data number (Cyclic)') }}
                        </option>
                    {% endif %}
                    {% if cyclicCalender %}
                        <option
                            title="{{ _('Divide by calender (Cyclic) hover msg') }}"
                            value="cyclicCalender"
                            selected
                        >
                            {{ _('Divide by calender (Cyclic)') }}
                        </option>
                    {% endif %}
                </select>
            </div>
            <span class="ml-2">
                {{ _('Datetime Range') }}
                <span id="datetimeRangeShowValue"></span
                ><span id="cyclicCalenderShowDiv"></span>
                <span id="category-daterange" class="hide"></span>
                <span id="var-daterange" class="hide"></span>
                <span id="cyclicTerm-daterange" class="hide"></span>
                <span id="directTerm-daterange" class="hide"></span>
                <span id="dataNumberTerm-daterange" class="hide"></span>
                <span id="cyclicCalender-daterange" class="hide"></span>
            </span>
        </div>
        <div class="mt-3">
            {% set hidden = "display: none; visibility: hidden" %}
            <div id="for-{{ 'category' if rlp else 'var' }}" name="var-form">
                {{ start_proc_interval(name='varTraceTime1', commonClass='to-update-time-range') }}
            </div>
            <div id="for-cyclicTerm" style="display: none; visibility: hidden">
                <div class="d-flex mb-2 flex-wrap">
                    <div
                        class="custom-control custom-radio grp-height-align mr-lg-5 mr-median-3 mr-3"
                    >
                        <input
                            type="radio"
                            name="cyclicTermTraceTime1"
                            onchange="handleChangeInterval(this, 'fromTo')"
                            class="custom-control-input to-update-time-range"
                            id="cyclicTermFrom"
                            value="from"
                            checked="checked"
                        />
                        <label
                            class="custom-control-label"
                            for="cyclicTermFrom"
                            class="label-left"
                        >
                            <span class="sub-label">{{ _('From') }}</span>
                        </label>
                    </div>
                    <div
                        class="custom-control custom-radio grp-height-align mr-lg-5 mr-median-3 mr-3"
                    >
                        <input
                            type="radio"
                            name="cyclicTermTraceTime1"
                            onchange="handleChangeInterval(this, 'fromTo')"
                            class="custom-control-input to-update-time-range"
                            id="cyclicTermTo"
                            value="to"
                        />
                        <label
                            class="custom-control-label"
                            for="cyclicTermTo"
                            class="label-left"
                        >
                            <span class="sub-label">{{ _('To') }}</span>
                        </label>
                    </div>
                    <div
                        class="custom-control custom-radio grp-height-align mr-lg-5 mr-median-3 mr-3"
                    >
                        <input
                            class="custom-control-input to-update-time-range"
                            type="radio"
                            name="cyclicTermTraceTime1"
                            onchange="handleChangeInterval(this, 'cyclicRecent')"
                            id="cyclicRecentInterval"
                            value="recent"
                        />
                        <label
                            class="custom-control-label"
                            for="cyclicRecentInterval"
                            class="label-left"
                        >
                            <span
                                class="sub-label hint-text"
                                title="{{ _('Select a unit of time and input value.') }}"
                                >{{ _('Latest') }}</span
                            >
                        </label>
                    </div>
                    <div class="flex-grow-1">
                        <div id="for-fromTo" class="position-relative">
                            {{ datetime_range_picker('DATETIME_PICKER','',id='cyclicTermDatetimePicker', isShowTimePicker=True, dtClassName='to-update-time-range') }}
                            <input
                                id="cyclicTermStartDate"
                                class="datepicker hasdatepicker form-control category-plot-time"
                                data-date-format="yyyy-mm-dd"
                                name="START_DATE"
                                type="text"
                                hidden
                            />
                            <input
                                name="START_TIME"
                                class="form-control"
                                id="cyclicTermStartTime"
                                type="text"
                                hidden
                            />
                            <button
                                type="button"
                                onclick="showDataFinderModal(this)"
                                name="dataFinderBtn"
                                style="position: absolute; top: 3px; right: 3px; display: none"
                                class="btn btn-sm btn-primary"
                            >
                                Data finder
                            </button>
                        </div>
                        <div id="for-cyclicRecent" style="display: none">
                            <div
                                class="custom-control custom-checkbox custom-control-inline grp-height-align"
                            >
                                <input
                                    type="checkbox"
                                    name="autoUpdateInterval"
                                    value="1"
                                    class="custom-control-input"
                                    id="CyclicAutoUpdateInterval"
                                />
                                <label
                                    class="custom-control-label"
                                    for="CyclicAutoUpdateInterval"
                                    >{{ _('Auto Update') }}</label
                                >
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex align-items-center flex-wrap">
                    <div class="d-flex align-items-center mr-3 mb-2">
                        <label
                            class="mr-2 mb-0"
                            title="{{ DivisionNumberHover }}"
                        >
                            <span class="hint-text sub-label"
                                >{{ _('Division number') }}</span
                            >
                        </label>
                        <input
                            type="text"
                            class="form-control to-update-time-range"
                            id="cyclicTermDivNum"
                            name="cyclicTermDivNum"
                            value="{{ cyclicTermDefault }}"
                            style="max-width: 100px"
                        />
                    </div>
                    <div class="d-flex align-items-center mr-3 mb-2">
                        <label
                            title="{{ WindowLengthHover }}"
                            class="mr-2 mb-0"
                        >
                            <span class="hint-text sub-label"
                                >{{ _('Window length') }} [hour]</span
                            >
                        </label>
                        <input
                            type="text"
                            class="form-control to-update-time-range"
                            id="cyclicTermWindowLength"
                            name="cyclicTermWindowLength"
                            value="1"
                            style="max-width: 80px"
                        />
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <label class="mr-2 mb-0" title="{{ IntervalHover }}">
                            <span class="hint-text sub-label"
                                >{{ _('Interval') }} [hour]</span
                            >
                        </label>
                        <input
                            type="text"
                            class="form-control to-update-time-range"
                            id="cyclicTermInterval"
                            style="max-width: 80px"
                            name="cyclicTermInterval"
                            value="{{ cyclicIntervalDefault }}"
                        />
                    </div>
                </div>
            </div>
            <div id="for-directTerm" style="display: none; visibility: hidden">
                <div class="d-flex">
                    <div
                        class="custom-control custom-radio grp-height-align"
                        style="width: 200px"
                    >
                        <input
                            type="radio"
                            name="termTraceTime1"
                            onchange="handleChangeInterval(this)"
                            class="custom-control-input"
                            id="radioDefaultInterval"
                            value="default"
                            checked="checked"
                        />
                        <label
                            class="custom-control-label"
                            for="radioDefaultInterval"
                            class="label-left"
                        >
                            <span class="sub-label">{{ _('Date range') }}</span>
                        </label>
                    </div>
                    <div class="position-relative d-flex flex-grow-1 ml-2">
                        <div id="datetimeList" class="w-100">
                            <div
                                class="datetimerange-group d-flex align-items-center"
                            >
                                {{ datetime_range_picker('DATETIME_RANGE_PICKER','',id='datetimeRangePicker1' , isSetDefaultValue=True, dtClassName='to-update-time-range') }}
                                <input
                                    id="startDate1"
                                    class="datepicker hasdatepicker form-control category-plot-time"
                                    data-date-format="yyyy-mm-dd"
                                    name="START_DATE"
                                    type="text"
                                    hidden
                                />
                                <input
                                    name="START_TIME"
                                    class="form-control"
                                    id="startTime1"
                                    type="text"
                                    hidden
                                />
                                <input
                                    id="endDate1"
                                    class="datepicker hasdatepicker form-control category-plot-time"
                                    data-date-format="yyyy-mm-dd"
                                    name="END_DATE"
                                    type="text"
                                    hidden
                                />
                                <input
                                    name="END_TIME"
                                    class="form-control"
                                    id="endTime1"
                                    type="text"
                                    hidden
                                />
                                <button
                                    type="button"
                                    onclick="showDataFinderModal(this)"
                                    name="dataFinderBtn"
                                    style="position: absolute; top: 3px; right: 20px; display: none"
                                    class="btn btn-sm btn-primary"
                                >
                                    Data finder
                                </button>
                                <span class="ml-2" style="width: 8.5px"></span>
                            </div>
                            {% for i in range(2,9) %}
                                <div
                                    class="datetimerange-group d-flex align-items-center"
                                >
                                    {{ datetime_range_picker('DATETIME_RANGE_PICKER','',id='datetimeRangePicker' + i|string , isSetDefaultValue=False, dtClassName='to-update-time-range', focus='handleOnfocusEmptyDatetimeRange(this)') }}
                                    <input
                                        id="startDate{{ i }}"
                                        class="datepicker hasdatepicker form-control category-plot-time"
                                        data-date-format="yyyy-mm-dd"
                                        name="START_DATE"
                                        type="text"
                                        hidden
                                    />
                                    <input
                                        name="START_TIME"
                                        class="form-control"
                                        id="startTime{{ i }}"
                                        type="text"
                                        hidden
                                    />
                                    <input
                                        id="endDate{{ i }}"
                                        class="datepicker hasdatepicker form-control category-plot-time"
                                        data-date-format="yyyy-mm-dd"
                                        name="END_DATE"
                                        type="text"
                                        hidden
                                    />
                                    <input
                                        name="END_TIME"
                                        class="form-control"
                                        id="endTime{{ i }}"
                                        type="text"
                                        hidden
                                    />
                                    <span class="ml-2 remove-date"
                                        ><i class="fa fa-times fa-sm"></i
                                    ></span>
                                </div>
                            {% endfor %}
                        </div>
                        <button
                            id="termBtnAddDateTime"
                            type="button"
                            class="btn simple-btn"
                        >
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
            {% if dataNumber %}
                <div
                    id="for-dataNumberTerm"
                    style="display: none; visibility: hidden"
                >
                    {{ start_proc_interval(name='varTraceTime2', prefix='dataNumberTerm', commonClass='to-update-time-range', showAutoUpdate=true) }}
                    <div class="d-flex align-items-center mt-2">
                        <span class="sub-label mr-2"
                            >{{ _('Number of data') }}</span
                        >
                        <input
                            type="text"
                            class="form-control to-update-time-range"
                            id="dataNumber"
                            name="dataNumber"
                            value="1000"
                            style="max-width: 100px"
                        />
                    </div>
                </div>
            {% endif %}

            {% if cyclicCalender %}
                <div
                    id="for-cyclicCalender"
                    style="display: none; visibility: hidden"
                >
                    {{ start_proc_interval(name='varTraceTime2', prefix='cyclicCalender', commonClass='to-update-time-range', showAutoUpdate=true, cyclicCalender=True, dateRangeHoverMsg=_('Daterange divide by calender hover msg')) }}
                    <div class="d-flex mt-2">
                        <div class="d-flex align-items-center">
                            <label
                                class="mr-2 mb-0"
                                title="{{ _('Divide format hover msg') }}"
                            >
                                <span class="hint-text sub-label"
                                    >{{ _('Divide format') }}</span
                                >
                            </label>
                            <div class="custom-selection-section">
                                <div
                                    class="custom-selection gui-custom-selection"
                                    style="width: auto; min-width: 240px"
                                    id="cyclicCalender-selection"
                                >
                                    <span id="cyclicCalender"
                                        >yyyy-mm-dd 2022-04-01</span
                                    >
                                    <span class="selection__arrow"
                                        ><b></b
                                    ></span>
                                </div>
                                <div
                                    class="custom-selection-content"
                                    style="width: auto"
                                    id="cyclicCalender-content"
                                >
                                    <div class="cyclic-calender-select-option">
                                        <div
                                            class="cyclic-calender-option-list"
                                        >
                                            <div
                                                class="cyclic-calender-option-item"
                                            >
                                                <div
                                                    class="custom-control custom-radio"
                                                >
                                                    <input
                                                        type="radio"
                                                        name="cyclicCalender"
                                                        id="cyclicCalender_{{ format }}"
                                                        class="custom-control-input to-update-time-range"
                                                        value="to"
                                                    />
                                                    <label
                                                        class="custom-control-label"
                                                        for="cyclicCalender_{{ format }}"
                                                        class="label-left"
                                                    >
                                                        <span class="sub-label"
                                                            >{{ format }}</span
                                                        >
                                                    </label>
                                                </div>
                                                <span
                                                    class="cyclic-calender-option-example"
                                                    >2022040112</span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div
                            style="display: none;"
                            class="align-items-center for-recent-cyclicCalender ml-2 hide"
                        >
                            <label
                                class="mr-2 mb-0"
                                title="{{ _('Offset hover msg') }}"
                            >
                                <span class="hint-text sub-label"
                                    >{{ _('Offset') }} [hour]</span
                                >
                            </label>
                            <input
                                type="text"
                                class="form-control to-update-time-range"
                                name="divideOffset"
                                id="divideOffset"
                                style="max-width: 80px"
                                name="divideOffset"
                                value="0"
                                disabled
                            />
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
{% endmacro %}

<!-- 外れ値除去　セレクション -->
{% macro remove_outlier(id='hmRemoveOutlier', name='remove_outlier', cl='', showHintText=true) %}
    <div class="d-flex justify-content-center align-items-center {{ cl }}">
        {{ sub_label(_('Remove outlier'), title=_('The targets of removing outlier are Max, Mean Min, σ, and Range.') if showHintText else '', hl=' pb-0 mr-3') }}
        <select
            id="{{ id }}"
            class="form-control"
            name="{{ name }}"
            style="width: 100px"
        >
            <option value="1">{{ _('Yes') }}</option>
            <option selected value="0">{{ _('No') }}</option>
        </select>
    </div>
{% endmacro %}

<!-- info I mark html -->
{% macro info_i_mark() %}
    <div id="sim" class="setting-inform-modal show-filter-info">
        <div class="setting-inform border-white">
            <span><i class="fas fa-info-circle"></i></span>
        </div>
        <div
            id="settingHoverContent"
            class="setting-inform-content show-filter-info"
        >
            <button
                class="btn clipboard"
                style="float:right;"
                data-clipboard-target="#setting-infor-table"
                title=""
            >
                <i class="fa fa-copy" aria-hidden="true"></i>
            </button>
            <div class="setting-content">
                <table class="table table-borderless" id="setting-infor-table">
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
{% endmacro %}
<!-- For export menu -->
{% macro export_gui(disable_plot=False) %}
    <div class="dropdown ml-3">
        <button
            class="btn dropdown-toggle form-control"
            type="button"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
        >
            {{ _('Export data') }}
        </button>
        <div class="dropdown-menu" id="export-dropdown">
            <div class="row pl-3 ml-0 mr-0 export-header">
                <div class="form-check form-check-inline">
                    <input
                        class="form-check-input"
                        type="radio"
                        name="export_from"
                        id="exportFromAll"
                        value="all"
                        checked
                    />
                    <label class="form-check-label" for="exportFromAll"
                        >All (Original)</label
                    >
                </div>
                {% if not disable_plot %}
                    <div class="form-check form-check-inline">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="export_from"
                            id="exportFromPlot"
                            value="plot"
                        />
                        <label class="form-check-label" for="exportFromPlot"
                            >Plot (Filtered)</label
                        >
                    </div>
                {% endif %}
            </div>
            <div class="row ml-3">
                <label class="col-sm-3 col-form-label">Data</label>
                <div class="col-sm">
                    <a
                        class="dropdown-item"
                        href="#"
                        onclick="handleExportData('CSV')"
                        >CSV</a
                    >
                </div>
            </div>
            <div class="row ml-3">
                <div class="col-sm-3"></div>
                <div class="col-sm">
                    <a
                        class="dropdown-item"
                        href="#"
                        onclick="handleExportData('TSV')"
                        >TSV</a
                    >
                </div>
            </div>
            <div class="row ml-3">
                <div class="col-sm-3"></div>
                <div class="col-sm">
                    <a
                        id="exportDataToClipboardAcr"
                        class="dropdown-item"
                        href="#"
                        onclick="handleExportData('TSV-CLIPBOARD')"
                        >Clipboard</a
                    >
                </div>
            </div>
            <div class="row ml-3">
                <label class="col-sm-3 col-form-label">Image</label>
                <div class="col-sm">
                    <a
                        class="dropdown-item"
                        href="#"
                        onclick="handleTakeScreenShot()"
                        >PNG</a
                    >
                </div>
            </div>
            <div class="row ml-3">
                <div class="col-sm-3"></div>
                <div class="col-sm">
                    <a
                        id="exportImageToClipboardAcr"
                        class="dropdown-item"
                        href="#"
                        onclick="handleCopyImageToClipboard()"
                        >Clipboard</a
                    >
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro pcp_export_data_selected_gui() %}
    <div class="dropdown ml-3">
        <button
            class="btn dropdown-toggle form-control border-white"
            type="button"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
        >
            {{ _('Export data') }}
        </button>
        <div
            class="dropdown-menu"
            style="text-align: center; min-width: 110px;"
        >
            <div>
                <a
                    class="dropdown-item"
                    href="#"
                    onclick="handleExportData('CSV', true)"
                    >CSV</a
                >
            </div>
            <div>
                <a
                    class="dropdown-item"
                    href="#"
                    onclick="handleExportData('TSV', true)"
                    >TSV</a
                >
            </div>
        </div>
    </div>
{% endmacro %}

{% macro frequency_scale(name='frequencyScale', cl='', defaultValue='1') %}
    <div class="d-flex align-items-center ml-2 {{ cl }}">
        <span class="mr-2"> {{ _('X axis') }} </span>
        <select
            name="{{ name }}"
            default-value="{{ defaultValue }}"
            class="form-control border-white w-auto scale-dropdown frequency-scale"
        >
            <option value="1" selected>{{ _('Common scale') }}</option>
            <option value="2">{{ _('Auto range') }}</option>
        </select>
    </div>
{% endmacro %}

{% macro emd_select(name='emdType', cl='', selectCl='') %}
    <div class="d-flex align-items-center ml-2 {{ cl }}">
        <span class="mr-2 hint-text" title="{{ _('Mode hover msg') }}"
            >Mode</span
        >
        <select name="{{ name }}" class="form-control w-auto {{ selectCl }}">
            <option title="{{ _('Drift hover msg') }}" value="drift" selected>
                {{ _('Drift') }}
            </option>
            <option title="{{ _('Diff hover msg') }}" value="diff">
                {{ _('Diff') }}
            </option>
            <option title="{{ _('Both hover msg') }}" value="both">
                {{ _('Both') }}
            </option>
        </select>
    </div>
{% endmacro %}
<!-- Data Preprocess Options -->
{% macro preprocess_options(exception=True, outlier=True, pulsed=True, isRealOnlyMsg='', dup=True, objExp=False, outlierDefault='O6m') %}
    {% set cleansing_option = [] %}
    {% if exception==True %}
        {% set t = cleansing_option.append("E") %}
    {% endif %}
    {% if outlier==True %}
        {% set t = cleansing_option.append(outlierDefault) %}
    {% endif %}
    {% if pulsed==True %}
        {% set t = cleansing_option.append("P") %}
    {% endif %}
    {% if dup %}
        {% set t = cleansing_option.append("Da") %}
        {% set t = cleansing_option.append("a") %}
    {% endif %}
    {% if cleansing_option|length %}
        {% set cleansing_option = ['['] + cleansing_option + [']'] %}
    {% endif %}
    {% set cleansing_val = cleansing_option|join('') %}
    <div
        class="d-flex justify-content-center align-items-center custom-selection-section"
    >
        <div
            class="custom-selection gui-custom-selection"
            id="cleansing-selection"
        >
            <input type="hidden" name="cleansing" value="" />
            <span
                >{{ _('Cleansing') }}
                <span id="cleansing-selected">{{ cleansing_val }}</span>
                <span id="outlierCount" title="" class="hint-text"></span>
            </span>
            <span class="selection__arrow"><b></b></span>
        </div>
        <div class="custom-selection-content" id="cleansing-content">
            <div class="custom-control custom-checkbox">
                <input
                    class="custom-control-input"
                    id="exception-input"
                    type="checkbox"
                    value="1"
                    show-value="E"
                    name="isValidateData"
                    onchange="updateCleansing(this)"
                    {% if exception==True %}checked="checked"{% endif %}
                />
                <label
                    class="custom-control-label hint-text"
                    for="exception-input"
                >
                    <span title="{{ _('Exception Estimation Explanation') }}"
                        >Exception</span
                    >
                </label>
            </div>
            {% if objExp %}
                <div class="my-1">
                    <div
                        class="d-flex justify-content-between align-items-center"
                    >
                        <label class="mb-1 hint-text">
                            <span title="{{ _('Remove outlier hover msg') }}"
                                >Outlier</span
                            >
                        </label>
                        {{ outlier_option(outlierDefault) }}
                    </div>

                    <div class="pl-2">
                        <div class="custom-control custom-checkbox">
                            <input
                                class="custom-control-input"
                                id="remove_outlier_objective_var"
                                type="checkbox"
                                value="1"
                                show-value="O"
                                name="remove_outlier_objective_var"
                                onchange="updateCleansing(this)"
                                checked
                            />
                            <label
                                class="custom-control-label hint-text"
                                for="remove_outlier_objective_var"
                            >
                                <span
                                    title="{{ _('Applies outlier removal to the objective variable.') }}"
                                    >Objective var</span
                                >
                            </label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input
                                class="custom-control-input"
                                id="remove_outlier_explanatory_var"
                                type="checkbox"
                                value="1"
                                show-value="O"
                                name="remove_outlier_explanatory_var"
                                onchange="updateCleansing(this)"
                            />
                            <label
                                class="custom-control-label hint-text"
                                for="remove_outlier_explanatory_var"
                            >
                                <span
                                    title="{{ _('Applies outlier removal to the explanatory variable.') }}"
                                    >Explanatory var</span
                                >
                            </label>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="d-flex align-items-center justify-content-between">
                    <div class="custom-control custom-checkbox">
                        <input
                            class="custom-control-input"
                            id="outlier-input"
                            type="checkbox"
                            value="1"
                            show-value="O"
                            name="remove_outlier"
                            onchange="updateCleansing(this)"
                            {% if outlier==True %}checked="checked"{% endif %}
                        />
                        <label
                            class="custom-control-label hint-text"
                            for="outlier-input"
                        >
                            <span
                                title="{{ _('Remove outlier hover msg') }}
{{ isRealOnlyMsg }}"
                                >Outlier</span
                            >
                        </label>
                    </div>
                    {% if isRealOnlyMsg %}
                        <input
                            type="checkbox"
                            checked
                            value="1"
                            name="is_remove_outlier_real_only"
                            hidden
                        />
                    {% endif %}
                    {{ outlier_option(outlierDefault) }}
                </div>
            {% endif %}
            <div class="custom-control custom-checkbox">
                <input
                    class="custom-control-input"
                    id="pulsed-input"
                    type="checkbox"
                    value="1"
                    show-value="P"
                    name="abnormal_count"
                    onchange="updateCleansing(this)"
                    {% if pulsed==True %}checked="checked"{% endif %}
                />
                <label
                    class="custom-control-label hint-text"
                    for="pulsed-input"
                >
                    <span
                        title="{{ _('Values those have pulsed number of occurrences compared to the neighbors: Replace to NA') }}"
                        >Pulsed</span
                    >
                </label>
            </div>
            {% if dup %}
                <div class="custom-control d-flex justify-content-between mt-1">
                    <label class="mr-2 hint-text">
                        <span title="{{ _('Duplicate serial hover message') }}"
                            >Dup</span
                        >
                    </label>
                    <select
                        onchange="updateCleansing(this)"
                        class="form-control border-white"
                        name="duplicated_serial"
                        style="width: 84px; height: 30px; padding: 3px"
                    >
                        <option selected value="all" show-value="Da">
                            All
                        </option>
                        <option value="first" show-value="Df">First</option>
                        <option value="last" show-value="Dl">Last</option>
                    </select>
                </div>
                <div class="custom-control d-flex justify-content-between mt-1">
                    <label class="mr-2 hint-text">
                        <span title="{{ _('Dup check message') }}"
                            >Dup check</span
                        >
                    </label>
                    <select
                        onchange="updateCleansing(this)"
                        class="form-control border-white"
                        name="dup_check"
                        style="width: 84px; height: 30px; padding: 3px"
                    >
                        <option selected value="auto" show-value="a">
                            Auto
                        </option>
                        <option value="check" show-value="c">Check</option>
                        <option value="silent" show-value="s">Skip</option>
                    </select>
                </div>
            {% endif %}
        </div>
    </div>
{% endmacro %}
<!-- -->

{% macro outlier_option(defaultValue='O6m') %}
    <select
        onchange="updateCleansing(this)"
        class="form-control border-white"
        name="remove_outlier_type"
        style="width: 101px; height: 30px; padding: 3px"
    >
        <option
            value="Op1"
            show-value="p1"
            {% if defaultValue=='Op1' %}selected="selected"{% endif %}
        >
            P1-P99
        </option>
        <option
            value="Op5"
            show-value="p5"
            {% if defaultValue=='Op5' %}selected="selected"{% endif %}
        >
            P5-P95
        </option>
        <option
            value="O4m"
            show-value="4m"
            {% if defaultValue=='O4m' %}selected="selected"{% endif %}
        >
            4IQR-Major
        </option>
        <option
            value="O4i"
            show-value="4i"
            {% if defaultValue=='O4i' %}selected="selected"{% endif %}
        >
            4IQR-Minor
        </option>
        <option
            value="O4u"
            show-value="4u"
            {% if defaultValue=='O4u' %}selected="selected"{% endif %}
        >
            4IQR-Upper
        </option>
        <option
            value="O4l"
            show-value="4l"
            {% if defaultValue=='O4l' %}selected="selected"{% endif %}
        >
            4IQR-Lower
        </option>
        <option
            value="O6m"
            show-value="6m"
            {% if defaultValue=='O6m' %}selected="selected"{% endif %}
        >
            6IQR-Major
        </option>
        <option
            value="O6i"
            show-value="6i"
            {% if defaultValue=='O6i' %}selected="selected"{% endif %}
        >
            6IQR-Minor
        </option>
        <option
            value="O6u"
            show-value="6u"
            {% if defaultValue=='O6u' %}selected="selected"{% endif %}
        >
            6IQR-Upper
        </option>
        <option
            value="O6l"
            show-value="6l"
            {% if defaultValue=='O6l' %}selected="selected"{% endif %}
        >
            6IQR-Lower
        </option>
    </select>
{% endmacro %}

{% macro summary_option(prefix='', divId='summaryMenu', buttonId='summarySelectBtn', optionName='summaryOption', cl='') %}
    <div id="{{ divId }}" class="summary-menu {{ cl }}">
        <button id="{{ buttonId }}" class="btn btn-sm border-white">...</button>
        <div class="summary-menu-content">
            <div class="form-check">
                <label class="form-check-label" for="{{ prefix }}Radio1">
                    <input
                        class="form-check-input {{ optionName }}"
                        id="{{ prefix }}Radio1"
                        type="radio"
                        name="{{ optionName }}"
                        value="none"
                        default-value="none"
                        checked
                    />
                    <span>{{ _("None") }}</span>
                </label>
            </div>
            <div class="form-check">
                <label class="form-check-label" for="{{ prefix }}Radio3">
                    <input
                        class="form-check-input {{ optionName }}"
                        id="{{ prefix }}Radio3"
                        type="radio"
                        name="{{ optionName }}"
                        value="count"
                        default-value="none"
                    />
                    <span>{{ _("Count") }}</span>
                </label>
            </div>
            <div class="form-check">
                <label class="form-check-label" for="{{ prefix }}Radio4">
                    <input
                        class="form-check-input {{ optionName }}"
                        id="{{ prefix }}Radio4"
                        type="radio"
                        name="{{ optionName }}"
                        value="basic-statistics"
                        default-value="none"
                    />
                    <span>{{ _("Basic statistics") }}</span>
                </label>
            </div>
            <div class="form-check">
                <label class="form-check-label" for="{{ prefix }}Radio5">
                    <input
                        class="form-check-input {{ optionName }}"
                        id="{{ prefix }}Radio5"
                        type="radio"
                        name="{{ optionName }}"
                        value="non-parametric"
                        default-value="none"
                    />
                    <span>{{ _("Non parametric") }}</span>
                </label>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro graph_select_box_inner(id='', name='', values=[], texts=[], selectedValue='', onChange='', defaultValue='') %}
    <select
        name="{{ name }}"
        default-value="{{ defaultValue }}"
        id="{{ id }}"
        onchange="{{ onChange }}"
        class="form-control border-white w-auto scale-dropdown"
    >
        {% for value in values %}
            <option
                value="{{ value }}"
                {{ 'selected' if selectedValue==value else '' }}
            >
                {{ texts[loop.index0] }}
            </option>
        {% endfor %}
    </select>
{% endmacro %}

{% macro graph_select_box(id='', name='', label='', values=[], texts=[], selectedValue='', cl='', onChange='', defaultValue='', customSelect=False) %}
    <div class="d-flex align-items-center {{ cl }}">
        <span class="mr-2"> {{ label }} </span>
        {% if customSelect %}
            <div class="dn-custom-select">
                {{ graph_select_box_inner(id=id, name=name, values=values, texts=texts, selectedValue=selectedValue, onChange=onChange, defaultValue=defaultValue) }}
            </div>
        {% else %}
            {{ graph_select_box_inner(id=id, name=name, values=values, texts=texts, selectedValue=selectedValue, onChange=onChange, defaultValue=defaultValue) }}
        {% endif %}
    </div>
{% endmacro %}

{% macro switch_button(id='', name='', label='', title='', cl='', onChange='', defaultVal=False) %}
    <div class="d-flex align-items-center {{ cl }}">
        <label
            for="{{ id }}"
            title="{{ title }}"
            class="mb-0 mr-2 {{ 'hint-text' if title else '' }}"
            >{{ label }}</label
        >
        <label class="switch">
            <input
                id="{{ id }}"
                name="{{ name }}"
                default-value="{{ defaultVal }}"
                {{ 'checked' if defaultVal else '' }}
                type="checkbox"
                class="primary"
                onchange="{{ onChange }}"
            />
            <span class="slider round"></span>
        </label>
    </div>
{% endmacro %}

{% macro variable_ordering_mac() %}
    <div class="d-flex justify-content-center align-items-center ml-4">
        <span class="mr-2">{{ _('Order') }}</span>
        <div class="custom-selection-section">
            <div class="custom-selection border-white" id="ordering-selection">
                <span id="ordering-name">{{ _('In order of corr') }}</span>
                <span class="selection__arrow"><b></b></span>
            </div>
            <div class="custom-selection-content" id="ordering-content">
                <div class="form-check">
                    <label
                        class="form-check-label"
                        for="sort-by-selected-order"
                    >
                        <input
                            default-Value="correlation"
                            class="form-check-input"
                            id="sort-by-selected-order"
                            type="radio"
                            name="sort_by"
                            value="selected_order"
                            data-action="reload"
                        />
                        <span>{{ _('In variable selected order') }}</span>
                    </label>
                </div>
                <div class="form-check">
                    <label class="form-check-label" for="sort-by-setting">
                        <input
                            default-Value="correlation"
                            class="form-check-input"
                            id="sort-by-setting"
                            type="radio"
                            name="sort_by"
                            value="setting"
                            data-action="reload"
                        />
                        <span>{{ _('In set order') }}</span>
                    </label>
                </div>
                <div class="form-check">
                    <label class="form-check-label" for="sort-by-proc">
                        <input
                            class="form-check-input"
                            default-Value="correlation"
                            id="sort-by-proc"
                            type="radio"
                            name="sort_by"
                            value="process"
                            data-action="reload"
                        />
                        <span>{{ _('In process order') }}</span>
                    </label>
                </div>
                <div class="form-check">
                    <label class="form-check-label" for="sort-by-corr">
                        <input
                            class="form-check-input"
                            default-Value="correlation"
                            id="sort-by-corr"
                            type="radio"
                            name="sort_by"
                            value="correlation"
                            checked
                            data-action="reload"
                        />
                        <span>{{ _('In order of corr') }}</span>
                    </label>
                    <!-- 閾値 -->
                    <div>
                        <span class="text"
                            >{{ _('Corr threshold (abs)') }}</span
                        >
                    </div>
                    <div class="form-check group-input">
                        <input
                            class="form-check-input"
                            id="corr-threshold"
                            type="radio"
                            name="sort_option"
                            value="correlation"
                            default-Value="correlation"
                            data-action="reload"
                        />
                        <label class="form-check-label" for="corr-threshold"
                            >{{ _('|Corr|>') }}</label
                        >
                        <input
                            type="number"
                            class="form-control sub-input"
                            name="corr_value"
                            value="0.7"
                            data-action="reload"
                        />
                    </div>
                    <div class="form-check group-input">
                        <label class="form-check-label" for="max-vars"
                            >{{ _('Max') }}</label
                        >
                        <input
                            type="number"
                            id="max-vars"
                            class="form-control sub-input"
                            name="max_vars"
                            value="8"
                            default-value="8"
                            data-action="reload"
                        />
                    </div>
                    <div class="form-check group-input">
                        <input
                            class="form-check-input"
                            id="top-vars"
                            type="radio"
                            name="sort_option"
                            value="top"
                            default-Value="top"
                            data-action="reload"
                            checked
                        />
                        <label class="form-check-label" for="top-vars"
                            >{{ _('Top') }}</label
                        >
                        <input
                            type="number"
                            class="form-control sub-input"
                            name="top_vars"
                            value="8"
                            default-value="8"
                            data-action="reload"
                        />
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}
<!-- information table when hovering data point -->
{% macro data_point_info() %}
    <div id="dp-info">
        <div id="dp-info-content">
            <button
                class="btn"
                id="dp-info-table-copy"
                style="float:right;"
                data-clipboard-target="#dp-info-table"
                title="Copy to Clipboard"
                onclick="copyDataPointInfo(this);"
                data-copy-from="dp-info-table"
            >
                <i class="fa fa-copy" aria-hidden="true"></i>
            </button>
            <div class="table-content">
                <table class="table table-borderless" id="dp-info-table">
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
{% endmacro %}

<!-- Remove duplicated records -->
{% macro duplicated_serial(id='duplicatedSerial', name='duplicated_serial', cl='') %}
    <div class="d-flex justify-content-center align-items-center {{ cl }}">
        {{ sub_label(_('Duplicate serial'), title=_('Duplicate serial hover message'), hl=' pb-0 mr-3') }}
        <select
            id="{{ id }}"
            class="form-control"
            name="{{ name }}"
            style="width: 80px"
        >
            <option selected value="all">{{ _('All 2') }}</option>
            <option value="first">{{ _('First') }}</option>
            <option value="last">{{ _('Last') }}</option>
        </select>
    </div>
{% endmacro %}

{% macro data_finder_modal() %}
    <div id="data-finder-modal" class="data-finder position-relative">
        <span class="data-finder-close" onclick="closeCalenderModal()"
            ><i class="fa fa-times"></i
        ></span>
        <div class="data-finder-calendar">
            <div
                id="data-finder-year"
                class="calender-box year-calendar"
                style="display: none"
            ></div>
            <div
                id="data-finder-month"
                class="calender-box month-calendar"
            ></div>
            <div
                id="data-finder-week"
                class="calender-box week-calendar"
                style="display: none"
            ></div>
        </div>
        <div class="data-finder-action">
            <input
                name="data-finder-from"
                id="data-finder-from"
                class="form-control"
                type="text"
                hidden
            />
            <input
                name="data-finder-from"
                id="data-finder-to"
                class="form-control"
                type="text"
                hidden
            />
            <div class="action">
                <div class="action-offset">
                    <label id="dataFinderInputLabel" for="data-finder-input"
                        >From To</label
                    >
                </div>
                <div class="flex-grow-1">
                    <div class="form-group">
                        <input
                            name="data-finder-input"
                            id="data-finder-input"
                            class="form-control"
                            placeholder="マップをクリックしてください"
                            type="text"
                        />
                    </div>

                    <div class="action-button">
                        <div class="action-button-group">
                            <button
                                type="button"
                                onclick="handleBackToCalender('month')"
                                class="btn btn-sm btn-secondary for-data-finder for-data-finder-week"
                            >
                                Month
                            </button>
                            <button
                                type="button"
                                onclick="handleGoToCalender('year')"
                                class="btn btn-sm btn-secondary for-data-finder for-data-finder-month"
                            >
                                Year
                            </button>
                        </div>
                        <div class="action-button-group">
                            <button
                                type="button"
                                onclick="closeCalenderModal()"
                                class="btn btn-sm btn-secondary"
                            >
                                Cancel
                            </button>
                        </div>
                        <div class="action-button-group d-flex">
                            <button
                                type="button"
                                onclick="handleGoToCalender('month')"
                                style="margin-right: 8px"
                                class="btn btn-sm btn-primary for-data-finder for-data-finder-year"
                            >
                                Month
                            </button>
                            <button
                                type="button"
                                id="dataFinderWeekBtn"
                                onclick="handleGoToCalender('week')"
                                style="margin-right: 8px"
                                class="btn btn-sm btn-primary for-data-finder for-data-finder-month"
                            >
                                Week
                            </button>
                            <button
                                type="button"
                                onclick="handleSetValueToDateRangePicker()"
                                class="btn btn-sm btn-primary for-data-finder for-data-finder-week for-data-finder-month for-data-finder-year"
                            >
                                Set
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div
        class="single-month-calendar single-calendar position-fixed"
        style="display: none"
    >
        <div class="single-month-calendar-header single-calendar-header">
            <div
                class="single-month-calendar-title single-calendar-title"
                id="singleMonthCalendarShowYear"
            ></div>
            <div class="single-month-calendar-action single-calendar-action">
                <i
                    class="fa fa-arrow-up"
                    id="singleMonthCalendarGoToNextYear"
                ></i>
                <i
                    class="fa fa-arrow-down"
                    id="singleMonthCalendarGoToPrevYear"
                ></i>
            </div>
        </div>
        <div
            class="single-month-calendar-body single-calendar-body"
            id="singleMonthCalendarBody"
        ></div>
        <div class="single-month-calendar-bottom single-calendar-bottom">
            <div class="action" id="singleMonthCalendarThisWeek">
                {{ _('This week') }}
            </div>
        </div>
    </div>

    <div
        class="single-date-calendar single-calendar position-fixed"
        style="display: none"
    >
        <div class="single-date-calendar-header single-calendar-header">
            <div
                class="single-date-calendar-title single-calendar-title"
                id="singleDateCalendarShowYearMonth"
            ></div>
            <div class="single-date-calendar-action single-calendar-action">
                <i
                    class="fa fa-arrow-up"
                    id="singleDateCalendarGoToNextMonth"
                ></i>
                <i
                    class="fa fa-arrow-down"
                    id="singleDateCalendarGoToPrevMonth"
                ></i>
            </div>
        </div>
        <div
            class="single-date-calendar-body single-calendar-body"
            id="singleDateCalendarBody"
        ></div>
        <div class="single-date-calendar-bottom single-calendar-bottom">
            <div class="action" id="singleDateCalendarThisDate">
                {{ _('Today') }}
            </div>
        </div>
    </div>
{% endmacro %}

{% macro data_finder_card() %}
    <div
        id="data-finder-card"
        class="card-body table-bordered graph-navi"
        style="display: none"
    >
        <div class="row">
            <div class="col-xl-2 col-3">
                {{ label(_('Data Finder'), title=_('DataFinderHoverMsg')) }}
            </div>
            <div class="col-xl-10 col-9">{{ data_finder_modal() }}</div>
        </div>
    </div>
{% endmacro %}
<!-- on-demand filter macro -->
{% macro on_demand_filter() %}
    <div id="onDemandFilter" class="summary-menu ml-2">
        <button
            id="onDemandFilterBtn"
            class="btn btn-sm border-white on-demand-btn show-detail"
            title="{{ _('You can filter categorical data used for graph drawing.') }}"
        ></button>
    </div>
{% endmacro %}
{% macro end_col_order_modal(graphArea='', modalId='endColOrderModal', tableId='endColOrderTable', okBtnId='btnEndColOrderModalOK', cancelBtnId='btnEndColOrderModalCancel', isSwitchXY=false) %}
    <div
        id="{{ modalId }}{{ 'GraphArea' if graphArea else '' }}"
        class="modal in endColOrderTable"
        data-backdrop="static"
    >
        <div class="modal-dialog modal-confirm modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">
                        {{ _('Variable display ordering')  if not isSwitchXY else _('Variable axis setting') }}
                    </h4>
                    <button
                        type="button"
                        class="close {{ cancelBtnId }}"
                        data-dismiss="modal"
                        aria-hidden="true"
                    >
                        ×
                    </button>
                </div>
                <div class="modal-body">
                    <div
                        class="table-responsive"
                        id="{{ tableId }}{{ 'GraphArea' if graphArea else '' }}_wrap"
                        style="max-height: 75vh"
                    >
                        <table
                            id="{{ tableId }}{{ 'GraphArea' if graphArea else '' }}"
                            class="table table-bordered table-main table-bordered table-dark table-fixed table-striped table-hover table-hover-light endColOrderTable"
                        >
                            <thead>
                                <tr>
                                    <th
                                        class="text-center"
                                        style="max-width: 20px"
                                    >
                                        {{ _("Order") if not isSwitchXY else _('Axis') }}
                                    </th>
                                    <th class="text-center">
                                        {{ _("Process Name") }}
                                    </th>
                                    <th class="text-center">
                                        {{ _("Process Name") }}
                                    </th>
                                    <th class="text-center">
                                        {{ _("English Name") }}
                                    </th>
                                    <th class="text-center">
                                        {{ _("Shown Name") }}
                                    </th>
                                    <th class="text-center">
                                        {{ _("Data Type") }}
                                    </th>
                                    {% if not graphArea %}
                                        <th
                                            class="text-center col-del-btn"
                                        ></th>
                                    {% endif %}
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button
                        id="{{ okBtnId }}{{ 'GraphArea' if graphArea else '' }}"
                        class="btn btn-primary"
                        data-item-id=""
                        data-dismiss="modal"
                    >
                        {{ _('OK') }}
                    </button>
                    <button
                        id="{{ cancelBtnId }}{{ 'GraphArea' if graphArea else '' }}"
                        class="btn btn-secondary {{ cancelBtnId }}{{ 'GraphArea' if graphArea else '' }}"
                        data-dismiss="modal"
                    >
                        {{ _('Cancel') }}
                    </button>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro order_btn(graphArea='0', callbackFunc='null') %}
    <button
        id="btnSortCol"
        name="btnSortCol"
        onclick="showSortColModal({{ graphArea }}, {{ callbackFunc }})"
        type="button"
        class="btn {{ 'btn-sm border-white ml-2' if graphArea != '0' else 'simple-btn mr-3' }}"
    >
        <i class="fa-solid fa-list-ol"></i>
    </button>
{% endmacro %}

{% macro jump_modal() %}
    {% include 'jump.html' %}
{% endmacro %}

{% macro jump_button() %}
    <div class="summary-menu ml-2">
        <button
            onclick="showJumpModal();"
            class="btn btn-sm border-white jump-btn"
            title="{{ _('Jump to other pages') }}"
        >
            <i class="fa fa-arrow-alt-circle-right"></i>
        </button>
    </div>
{% endmacro %}

{% macro judgeCondition() %}
    <div
        class="card-body table-bordered graph-navi"
        id="judgeConditionCard"
        style="display: none"
    >
        <div class="row">
            <div class="col-xl-2 col-3"></div>
            <div class="col-xl-10 col-9">
                <div class="row">
                    <div
                        class="col-12 col-xl-6 col-lg-12 col-md-12 col-sm-12 p-1"
                    >
                        <div class="d-flex align-items-center">
                            <div class="d-flex align-items-center mr-3">
                                <span
                                    class="sub-label hint-text d-block mr-3"
                                    title="{{ _('NG condition hover msg') }}"
                                    >{{ _('NG Condition') }}</span
                                >
                                <select
                                    style="width: 65px"
                                    id="NGCondition"
                                    class="form-control w-auto"
                                    name="NGCondition"
                                >
                                    <option show-for="real" value=">">
                                        {{ '>' }}
                                    </option>
                                    <option show-for="real" value=">=">
                                        {{ '>=' }}
                                    </option>
                                    <option show-for="real" value="<">
                                        {{ '<' }}
                                    </option>
                                    <option show-for="real" value="<=">
                                        {{ '<=' }}
                                    </option>
                                    <option value="=" selected>
                                        {{ '=' }}
                                    </option>
                                    <option value="!=">{{ '!=' }}</option>
                                </select>
                            </div>
                            <input
                                class="form-control"
                                id="NGConditionValue"
                                name="NGConditionValue"
                                type="text"
                                value="0"
                                style="width: 120px"
                            />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro nominal_scale() %}
    <div class="pl-3 pt-3">
        <div class="custom-control custom-checkbox custom-control-inline">
            <input
                type="checkbox"
                id="nominalScale"
                name="is_nominal_scale"
                class="custom-control-input"
                value="1"
                checked
            />
            <label
                class="custom-control-label hint-text"
                title="{{ _('Nominal scale hover msg') }}"
                for="nominalScale"
                >{{ _('Nominal scale') }}</label
            >
        </div>
    </div>
{% endmacro %}

{% macro nominal_scale_setting() %}
    <div class="summary-menu ml-2">
        <button
            onclick="showNominalScaleModal()"
            class="btn btn-sm border-white"
            title="{{ _('Set nominal scale and ordinal scale in categorical data.') }}"
        >
            <i class="fa-solid fa-ruler"></i>
        </button>
    </div>
    <div class="modal fade" id="nominalScaleModal">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <!--    head actions    -->
                    <div
                        class="d-flex align-items-center justify-content-between mb-4"
                    >
                        <h4></h4>
                        <div class="d-flex">
                            <div
                                class="d-flex align-items-center mr-3 border-gray-curve p-1"
                            >
                                <div class="mr-1">
                                    <input
                                        title="{{ _('Filter search box hover msg') }}"
                                        placeholder="{{ _('Search') }}"
                                        id="searchNominalScaleInput"
                                        class="form-control"
                                    />
                                </div>
                                <button
                                    class="btn simple-btn btn-setting mr-1"
                                    id="setNominalScaleInput"
                                >
                                    Set
                                </button>
                                <button
                                    class="btn simple-btn btn-setting"
                                    id="resetNominalScaleInput"
                                >
                                    Reset
                                </button>
                            </div>
                            <div class="d-flex align-items-center">
                                <button
                                    type="button"
                                    id=""
                                    class="btn btn-setting simple-btn mr-1"
                                    onclick="showGraphWithNominalSetting();"
                                >
                                    OK
                                </button>
                                <button
                                    type="button"
                                    class="btn btn-setting simple-btn"
                                    data-dismiss="modal"
                                    aria-label="Close"
                                    id=""
                                >
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                    <!--               No	工程名	列名	データ型	☑名義尺度-->
                    <!--                1	Kakou 加工	Station ステーション	Int	☑-->
                    <!--                2	Kakou 加工	Hinban 品番	Str	☑-->
                    <!--                3	Kensa 検査	Hantei 判定	Int	☑-->
                    <!--                4	Kensa 検査	Hinban 品番	Str	☑-->

                    <div class="mt-4">
                        <h4>
                            {{ _('Nominal/ordinal scale setting of categorical data') }}
                        </h4>
                        <div class="mt-4">
                            {% for p in _('Nominal scale hover msg').split('\n') %}
                                <p class="mb-0" style="line-height: 1.5">
                                    {{ p }}
                                </p>
                            {% endfor %}
                        </div>
                    </div>
                    <div
                        id="nominalScaleTable_wrap"
                        style="max-height: 65vh"
                        class="table-responsive mt-5 mb-4"
                    >
                        <table
                            class="table table-bordered table-fixed table-striped"
                            id="nominalScaleTable"
                        >
                            <thead>
                                <tr>
                                    <th class="text-center">No</th>
                                    <th class="text-center">
                                        {{ _('Process Name') }}
                                    </th>
                                    <th class="text-center">
                                        {{ _('Column Name') }}
                                    </th>
                                    <th class="text-center">
                                        {{ _('Data Type') }}
                                    </th>
                                    <th>
                                        <div
                                            class="custom-control custom-checkbox custom-control-inline"
                                        >
                                            <input
                                                type="checkbox"
                                                id="nominalScaleAll"
                                                name="nominal_scale_all"
                                                onclick="checkAllAsNominalScale(this);"
                                                class="custom-control-input"
                                                checked
                                            />
                                            <label
                                                class="custom-control-label"
                                                for="nominalScaleAll"
                                                >{{ _('Nominal scale') }}</label
                                            >
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}
{% macro input_and_select_btn(name, label, value='', placeholder='', type='text',label_block_cnt = 4,input_block_cnt = 8) %}
    <div class="form-group row">
        <label
            for="{{ name }}"
            class="col-sm-{{ label_block_cnt }} col-form-label label-right"
        >
            <h5>{{ _(label) }}</h5>
        </label>
        <div class="col-sm-{{ input_block_cnt }} input-with-select-btn">
            <input
                type="{{ type }}"
                name="{{ name }}"
                class="form-control"
                value="{{ value | escape }}"
                id="{{ name }}"
                placeholder="{{ placeholder }}"
            />
            {#            <button id="{{ name }}Btn" class="btn btn-light ml-1" style="width: 10%;">{{ _('Select') }}</button>#}
            {#            <input type="file" hidden id="{{ name }}Input"#}
            {#                   accept=".csv, .tsv, .ssv, .zip, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">#}
        </div>
    </div>
{% endmacro %}

{% macro graph_selection_percent_count_inner(id='', name='', values=[], texts=[], selectedValue='', onChange='', defaultValue='') %}
    <select
        name="{{ name }}"
        default-value="{{ defaultValue }}"
        id="{{ id }}"
        onchange="{{ onChange }}"
        class="form-control border-white w-auto scale-dropdown"
    >
        {% for value in values %}
            <option
                value="{{ value }}"
                {{ 'selected' if selectedValue==value else '' }}
            >
                {{ texts[loop.index0] }}
            </option>
        {% endfor %}
    </select>
{% endmacro %}

{% macro graph_selection_percent_count(id='', name='', values=[], texts=[], selectedValue='', cl='', onChange='', defaultValue='', customSelect=False) %}
    <div class="d-flex align-items-center {{ cl }}">
        {% if customSelect %}
            <div class="dn-custom-select">
                {{ graph_selection_percent_count_inner(id=id, name=name, values=values, texts=texts, selectedValue=selectedValue, onChange=onChange, defaultValue=defaultValue) }}
            </div>
        {% else %}
            {{ graph_selection_percent_count_inner(id=id, name=name, values=values, texts=texts, selectedValue=selectedValue, onChange=onChange, defaultValue=defaultValue) }}
        {% endif %}
    </div>
{% endmacro %}
